<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Inventario</title>
    <style>
        body{ font-family:Arial, sans-serif; background:#ede7f6; margin:0; padding:20px; color:#4a148c; }
        h1{ text-align:center; margin-bottom:20px; }
        .top-actions{ text-align:center; margin-bottom:20px; }
        .top-actions a{
            display:inline-block; margin:0 10px; padding:10px 18px;
            background:#7e57c2; color:#fff; border-radius:10px;
            text-decoration:none; font-weight:bold;
        }
        .top-actions a:hover{ background:#5e35b1; }
        form.search-bar {
            text-align:center; margin-bottom:25px;
        }
        form.search-bar input, form.search-bar select {
            padding:8px; border-radius:8px; border:1px solid #b39ddb;
            margin:0 5px; font-size:14px;
        }
        form.search-bar button {
            padding:8px 16px; border:none; border-radius:8px;
            background:#5E35B1; color:white; font-weight:bold;
            cursor:pointer; transition:background .2s;
        }
        form.search-bar button:hover { background:#4527A0; }
        form.search-bar a.clear {
            margin-left:10px; color:#6a1b9a; font-weight:bold;
            text-decoration:none;
        }
        .grid{ display:grid; grid-template-columns:repeat(auto-fit, minmax(260px,1fr)); gap:20px; }
        .card{
            background:#fff; border:1px solid #d1c4e9;
            padding:20px; border-radius:14px; text-align:center;
            box-shadow:0 3px 8px rgba(0,0,0,.12);
        }
        .card img{ max-width:100%; height:180px; object-fit:cover; border-radius:8px; margin-bottom:10px; }
        .btn{ display:block; margin-top:8px; padding:10px; border:none; border-radius:8px; cursor:pointer; font-weight:bold; text-decoration:none; }
        .btn-add{ background:#5E35B1; color:#fff; }
        .btn-add:hover{ background:#4527A0; }
        .btn-del{ background:#8E24AA; color:#fff; }
        .btn-del:hover{ background:#6A1B9A; }
        .back{ display:block; margin:30px auto 0; width:fit-content; text-decoration:none; color:#6a1b9a; font-weight:bold; }
    </style>
</head>
<body>
    <h1>Inventario de Ropa</h1>

    <div class="top-actions">
        <a href="{% url 'product_entry' %}">‚ûï Crear Producto</a>
        <a href="{% url 'home' %}">üè† Inicio</a>
    </div>

    <!-- Buscador -->
    <form method="get" class="search-bar">
        <input type="text" name="q" placeholder="Buscar por nombre..." value="{{ query|default:'' }}">
        
        <select name="category">
            <option value="all">Todas las categor√≠as</option>
            {% for code, label in categories %}
                <option value="{{ code }}" {% if category == code %}selected{% endif %}>
                    {{ label }}
                </option>
            {% endfor %}
        </select>

        <button type="submit">üîç Buscar</button>
        {% if query or category %}
            <a href="{% url 'inventory_display' %}" class="clear">‚úñ Limpiar</a>
        {% endif %}
    </form>

    <div class="grid">
        {% for product in products %}
        <div class="card">
            {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}">
            {% endif %}
            <h2>{{ product.name }}</h2>
            <p><strong>Categor√≠a:</strong> {{ product.get_category_display }}</p>
            <p><strong>Unidades:</strong> {{ product.quantity }}</p>
            <p>{{ product.description }}</p>

            <a href="{% url 'add_unit' product.id %}" class="btn btn-add">‚ûï Agregar unidad</a>
            <a href="{% url 'delete_product' product.id %}" class="btn btn-del" onclick="return confirm('¬øEliminar {{ product.name }}?')">üóë Eliminar</a>
        </div>
        {% empty %}
        <p style="grid-column:1/-1;text-align:center;">No hay productos registrados.</p>
        {% endfor %}
    </div>

    <a href="{% url 'home' %}" class="back">‚¨Ö Volver al inicio</a>
</body>
</html>
